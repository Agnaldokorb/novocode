import { PrismaClient } from "@prisma/client";
import { ServiceType, PublicationStatus } from "@prisma/client";

const prisma = new PrismaClient();

const sampleServices = [
  {
    title: "Desenvolvimento de Sites Profissionais",
    slug: "desenvolvimento-sites-profissionais",
    shortDescription:
      "Criamos sites modernos, responsivos e otimizados para SEO que ajudam sua empresa a se destacar online.",
    description: `## Desenvolvimento de Sites Profissionais

Criamos sites modernos e responsivos que ajudam sua empresa a ter uma presen√ßa digital forte e profissional.

### O que oferecemos:

- **Design Responsivo**: Sites que funcionam perfeitamente em todos os dispositivos
- **Otimiza√ß√£o SEO**: Melhor posicionamento nos motores de busca
- **Performance**: Carregamento r√°pido e experi√™ncia fluida
- **CMS Personalizado**: Gerencie seu conte√∫do facilmente
- **Integra√ß√£o**: Conecte com suas ferramentas existentes

### Tecnologias Utilizadas:

- Next.js para performance m√°xima
- React para interfaces interativas
- TypeScript para c√≥digo mais seguro
- Tailwind CSS para design moderno
- Supabase para backend robusto`,
    type: ServiceType.WEB,
    status: PublicationStatus.PUBLISHED,
    featured: true,
    price: 2500.0,
    priceDescription: "A partir de",
    features: [
      "Design responsivo e moderno",
      "Otimiza√ß√£o para SEO",
      "Painel administrativo",
      "Integra√ß√£o com redes sociais",
      "Formul√°rios de contato",
      "Galeria de imagens",
      "Blog integrado",
      "Google Analytics",
    ],
    benefits: [
      "Maior visibilidade online",
      "Gera√ß√£o de leads qualificados",
      "Credibilidade profissional",
      "Facilidade de manuten√ß√£o",
      "Melhor experi√™ncia do usu√°rio",
    ],
    deliverables: [
      "Site completo e funcional",
      "Painel administrativo",
      "Documenta√ß√£o t√©cnica",
      "Treinamento de uso",
      "3 meses de suporte gratuito",
    ],
    metaTitle: "Desenvolvimento de Sites Profissionais - NOVOCODE",
    metaDescription:
      "Criamos sites modernos, responsivos e otimizados para SEO. Aumente sua presen√ßa digital com a NOVOCODE.",
    keywords: [
      "site profissional",
      "desenvolvimento web",
      "design responsivo",
      "SEO",
      "Next.js",
    ],
  },
  {
    title: "Sistemas de Gest√£o Empresarial",
    slug: "sistemas-gestao-empresarial",
    shortDescription:
      "Desenvolvemos sistemas personalizados para otimizar processos e aumentar a produtividade da sua empresa.",
    description: `## Sistemas de Gest√£o Empresarial

Desenvolvemos sistemas personalizados que automatizam processos e aumentam a efici√™ncia operacional da sua empresa.

### Caracter√≠sticas principais:

- **Gest√£o Completa**: Controle todos os processos em uma √∫nica plataforma
- **Relat√≥rios Avan√ßados**: Dashboards e relat√≥rios em tempo real
- **Seguran√ßa**: Controle de acesso e backup autom√°tico
- **Escalabilidade**: Cresce junto com sua empresa
- **Integra√ß√£o**: Conecta com sistemas existentes

### M√≥dulos dispon√≠veis:

- Gest√£o financeira
- Controle de estoque
- Vendas e CRM
- Recursos humanos
- Relat√≥rios gerenciais`,
    type: ServiceType.DEVELOPMENT,
    status: PublicationStatus.PUBLISHED,
    featured: true,
    price: 8000.0,
    priceDescription: "A partir de",
    features: [
      "Interface intuitiva",
      "Controle de usu√°rios",
      "Backup autom√°tico",
      "Relat√≥rios customiz√°veis",
      "API para integra√ß√µes",
      "Suporte multiplataforma",
      "Notifica√ß√µes em tempo real",
      "Auditoria de dados",
    ],
    benefits: [
      "Redu√ß√£o de custos operacionais",
      "Maior controle dos processos",
      "Tomada de decis√£o baseada em dados",
      "Aumento da produtividade",
      "Elimina√ß√£o de retrabalho",
    ],
    deliverables: [
      "Sistema completo",
      "Manual do usu√°rio",
      "Treinamento da equipe",
      "Migra√ß√£o de dados",
      "6 meses de suporte",
    ],
    metaTitle: "Sistemas de Gest√£o Empresarial - NOVOCODE",
    metaDescription:
      "Sistemas personalizados para otimizar processos empresariais. Aumente a produtividade com a NOVOCODE.",
    keywords: [
      "sistema de gest√£o",
      "ERP",
      "automa√ß√£o",
      "processos empresariais",
      "software personalizado",
    ],
  },
  {
    title: "Aplicativos Mobile",
    slug: "aplicativos-mobile",
    shortDescription:
      "Desenvolvemos aplicativos nativos e h√≠bridos para iOS e Android com foco na experi√™ncia do usu√°rio.",
    description: `## Desenvolvimento de Aplicativos Mobile

Criamos aplicativos m√≥veis que conectam sua empresa aos seus clientes de forma inovadora e eficiente.

### Plataformas suportadas:

- **iOS**: Apps nativos para iPhone e iPad
- **Android**: Apps para toda a fam√≠lia Android
- **Cross-platform**: Uma base de c√≥digo para ambas as plataformas

### Funcionalidades avan√ßadas:

- Push notifications
- Geolocaliza√ß√£o
- Pagamentos integrados
- Chat em tempo real
- Offline capability
- Sincroniza√ß√£o em nuvem`,
    type: ServiceType.MOBILE,
    status: PublicationStatus.PUBLISHED,
    featured: false,
    price: 5000.0,
    priceDescription: "A partir de",
    features: [
      "Design nativo para cada plataforma",
      "Integra√ß√£o com APIs",
      "Push notifications",
      "Modo offline",
      "Pagamentos integrados",
      "Analytics integrado",
      "Testes automatizados",
      "Deploy nas lojas",
    ],
    benefits: [
      "Proximidade com clientes",
      "Novos canais de vendas",
      "Melhoria na experi√™ncia",
      "Dados de comportamento",
      "Vantagem competitiva",
    ],
    deliverables: [
      "App para iOS e Android",
      "C√≥digo fonte",
      "Documenta√ß√£o t√©cnica",
      "Publica√ß√£o nas lojas",
      "4 meses de suporte",
    ],
    metaTitle: "Desenvolvimento de Aplicativos Mobile - NOVOCODE",
    metaDescription:
      "Apps nativos e h√≠bridos para iOS e Android. Conecte-se aos seus clientes com a NOVOCODE.",
    keywords: ["app mobile", "iOS", "Android", "React Native", "aplicativo"],
  },
  {
    title: "APIs e Integra√ß√µes",
    slug: "apis-integracoes",
    shortDescription:
      "Desenvolvemos APIs robustas e integra√ß√µes para conectar seus sistemas e automatizar processos.",
    description: `## APIs e Integra√ß√µes de Sistemas

Conectamos seus sistemas e automatizamos processos atrav√©s de APIs robustas e integra√ß√µes personalizadas.

### Tipos de integra√ß√£o:

- **APIs REST**: Servi√ßos web modernos e escal√°veis
- **GraphQL**: Consultas eficientes e flex√≠veis
- **Webhooks**: Notifica√ß√µes em tempo real
- **Microservi√ßos**: Arquitetura modular e escal√°vel

### Integra√ß√µes comuns:

- Sistemas de pagamento
- ERPs e CRMs
- Marketplaces
- Redes sociais
- Servi√ßos de entrega
- Ferramentas de marketing`,
    type: ServiceType.API,
    status: PublicationStatus.PUBLISHED,
    featured: false,
    price: 3000.0,
    priceDescription: "A partir de",
    features: [
      "APIs RESTful",
      "Documenta√ß√£o completa",
      "Autentica√ß√£o segura",
      "Rate limiting",
      "Monitoramento",
      "Versionamento",
      "Testes automatizados",
      "Deploy automatizado",
    ],
    benefits: [
      "Automatiza√ß√£o de processos",
      "Redu√ß√£o de erros manuais",
      "Integra√ß√£o de dados",
      "Escalabilidade",
      "Tempo real",
    ],
    deliverables: [
      "API documentada",
      "SDK de integra√ß√£o",
      "Testes de carga",
      "Monitoramento",
      "3 meses de suporte",
    ],
    metaTitle: "APIs e Integra√ß√µes de Sistemas - NOVOCODE",
    metaDescription:
      "APIs robustas e integra√ß√µes personalizadas. Conecte seus sistemas com a NOVOCODE.",
    keywords: [
      "API",
      "integra√ß√£o",
      "REST",
      "GraphQL",
      "microservi√ßos",
      "automa√ß√£o",
    ],
  },
  {
    title: "Consultoria em Tecnologia",
    slug: "consultoria-tecnologia",
    shortDescription:
      "Ajudamos sua empresa a escolher as melhores tecnologias e definir estrat√©gias digitais eficientes.",
    description: `## Consultoria em Tecnologia

Oferecemos consultoria especializada para ajudar sua empresa a tomar as melhores decis√µes tecnol√≥gicas e implementar solu√ß√µes eficientes.

### √Åreas de atua√ß√£o:

- **Arquitetura de Software**: Defini√ß√£o de arquiteturas escal√°veis
- **Escolha de Tecnologias**: Sele√ß√£o das melhores ferramentas
- **Transforma√ß√£o Digital**: Moderniza√ß√£o de processos
- **DevOps**: Automa√ß√£o e melhores pr√°ticas
- **Seguran√ßa**: An√°lise e implementa√ß√£o de seguran√ßa

### Metodologia:

1. An√°lise da situa√ß√£o atual
2. Identifica√ß√£o de oportunidades
3. Defini√ß√£o de estrat√©gia
4. Plano de implementa√ß√£o
5. Acompanhamento dos resultados`,
    type: ServiceType.DEVELOPMENT,
    status: PublicationStatus.PUBLISHED,
    featured: false,
    price: 150.0,
    priceDescription: "Por hora",
    features: [
      "An√°lise t√©cnica detalhada",
      "Documenta√ß√£o completa",
      "Recomenda√ß√µes pr√°ticas",
      "Roadmap tecnol√≥gico",
      "Treinamento da equipe",
      "Acompanhamento",
      "Relat√≥rios peri√≥dicos",
      "Suporte cont√≠nuo",
    ],
    benefits: [
      "Decis√µes mais assertivas",
      "Redu√ß√£o de riscos",
      "Otimiza√ß√£o de recursos",
      "Moderniza√ß√£o eficiente",
      "Capacita√ß√£o da equipe",
    ],
    deliverables: [
      "Relat√≥rio de an√°lise",
      "Plano de a√ß√£o",
      "Documenta√ß√£o t√©cnica",
      "Treinamentos",
      "Acompanhamento mensal",
    ],
    metaTitle: "Consultoria em Tecnologia - NOVOCODE",
    metaDescription:
      "Consultoria especializada para decis√µes tecnol√≥gicas assertivas. Transforme sua empresa com a NOVOCODE.",
    keywords: [
      "consultoria",
      "tecnologia",
      "transforma√ß√£o digital",
      "arquitetura",
      "DevOps",
    ],
  },
];

async function seedServices() {
  console.log("üå± Populando servi√ßos...");

  try {
    // Buscar tecnologias existentes para associar aos servi√ßos
    const technologies = await prisma.technology.findMany();

    if (technologies.length === 0) {
      console.log(
        "‚ö†Ô∏è  Nenhuma tecnologia encontrada. Execute primeiro o script de tecnologias."
      );
      return;
    }

    // Buscar usu√°rio admin
    const adminUser = await prisma.user.findFirst({
      where: { role: "ADMIN" },
    });

    if (!adminUser) {
      console.log(
        "‚ö†Ô∏è  Usu√°rio admin n√£o encontrado. Execute primeiro o script de cria√ß√£o de usu√°rio."
      );
      return;
    }

    let createdCount = 0;
    let existingCount = 0;

    for (const serviceData of sampleServices) {
      // Verificar se o servi√ßo j√° existe
      const existingService = await prisma.service.findUnique({
        where: { slug: serviceData.slug },
      });

      if (existingService) {
        console.log(`‚è≠Ô∏è  J√° existe: ${serviceData.title}`);
        existingCount++;
        continue;
      }

      // Selecionar tecnologias relevantes baseadas no tipo de servi√ßo
      let relevantTechIds: string[] = [];

      switch (serviceData.type) {
        case ServiceType.WEB:
          relevantTechIds = technologies
            .filter((t) =>
              ["React", "Next.js", "TypeScript", "Tailwind CSS"].includes(
                t.name
              )
            )
            .map((t) => t.id);
          break;
        case ServiceType.DEVELOPMENT:
          relevantTechIds = technologies
            .filter((t) =>
              [
                "React",
                "Node.js",
                "TypeScript",
                "PostgreSQL",
                "Prisma",
              ].includes(t.name)
            )
            .map((t) => t.id);
          break;
        case ServiceType.MOBILE:
          relevantTechIds = technologies
            .filter((t) => ["React", "TypeScript", "Node.js"].includes(t.name))
            .map((t) => t.id);
          break;
        case ServiceType.API:
          relevantTechIds = technologies
            .filter((t) =>
              ["Node.js", "TypeScript", "PostgreSQL", "Prisma"].includes(t.name)
            )
            .map((t) => t.id);
          break;
        default:
          relevantTechIds = technologies.slice(0, 3).map((t) => t.id);
      }

      // Criar servi√ßo
      const service = await prisma.service.create({
        data: {
          ...serviceData,
          createdBy: adminUser.id,
          technologies: {
            connect: relevantTechIds.map((id) => ({ id })),
          },
        },
      });

      console.log(`‚úÖ Criado: ${service.title} (${serviceData.type})`);
      createdCount++;
    }

    console.log("\nüéâ Conclu√≠do!");
    console.log(`‚úÖ ${createdCount} servi√ßos criados`);
    console.log(`‚è≠Ô∏è  ${existingCount} servi√ßos j√° existiam`);
    console.log(`üìä Total: ${createdCount + existingCount} servi√ßos`);
  } catch (error) {
    console.error("‚ùå Erro ao popular servi√ßos:", error);
  } finally {
    await prisma.$disconnect();
  }
}

seedServices();
